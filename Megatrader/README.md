# Мегатрейдер
Допустим, что на рынке существует некое множество облигаций с номиналом 1000
условных единиц, по которым каждый день выплачивается купон размером 1 уе.
Погашение номинала облигации (то есть выплата 1000 условных единиц) происходит в
конце срока.
Каждая облигация на рынке характеризуется названием (некая строка) и ценой, цена
выражается в виде процентов от номинала, то есть цена 98.5 соответствует цене
98,5% * 1000 = 985 условных единиц.
У некоего трейдера есть информация о том какие предложения по облигациям будут
на рынке в ближайшие N дней. По каждому дню он знает, какие лоты будут
представлены на бирже: название облигации, цену и количество в штуках. Каждый
день на рынке может быть от 0 до M лотов. Трейдер располагает суммой денежных
средств в количестве S.
Необходимо определить какие лоты в какие дни нужно купить, чтобы получить
максимальный доход с учетом следующих условий:
1. Трейдер может только покупать облигации. Купленные облигации не продаются.
2. Трейдер может купить только весь лот целиком при наличии доступных денежных
средств.
3. Выплаченные купоны по купленным облигациям не реинвестируются, то есть не
увеличивают сумму доступных денежных средств.
4. Все купленные облигации будут погашены в день N+30.
5. Доход рассчитывается на день N+30, то есть после погашения облигаций.

#### Входные данные
На первой строке будут даны числа N, M и S. Далее будет идти k строк вида “<день>
<название облигации в виде строки без пробелов> <цена> <количество >”. Ввод будет
завершен пустой строкой.
```
2 2 8000
1 alfa-05 100.2 2
2 alfa-05 101.5 5
2 gazprom-17 100.0 2

```
#### Выходные данные
В первой строке необходимо указать сумму дохода, полученного трейдером на день
N+30. В последующих строках привести купленные лоты в таком же формате,
который используется во входных данных. Последняя строка должна быть пустой.
```
135
2 alfa-05 101.5 5
2 gazprom-17 100.0 2

```
## 1. Вычислительная сложность алгоритма и оценка необходимой памяти

### Вычислительная сложность

Алгоритм использует динамическое программирование с вложенными циклами по дням и доступным деньгам. Основные этапы включают:

- Итерацию по дням (N)
- Итерацию по доступной сумме (S)
- Генерацию комбинаций лотов для каждого дня
- Проверку возможности покупки комбинаций

Основная сложность заключается в генерации всех комбинаций лотов для каждого дня, что ведет к экспоненциальной сложности по количеству лотов (M) в наихудшем случае.

#### Оценка сложности:

- Генерация комбинаций: O(2^M) для каждого дня
- Проверка всех комбинаций: O(N * S * 2^M)

Общая сложность: O(N * S * 2^M)

### Оценка необходимой памяти

- Таблица динамического программирования `dp`: O(N * S)
- Хранение комбинаций для каждого дня `combinations_by_day`: O(N * 2^M)
- Список покупок `buys`: в наихудшем случае может быть до O(N * S)

Общая оценка памяти: O(N * S + N * 2^M)

## 2. Ограничения на размер входных параметров

Для того чтобы алгоритм выполнялся в разумное время (до 5 секунд), предположим, что максимальная комбинация лотов обрабатывается за 1 микросекунду. Таким образом, можем оценить разумные пределы:

Примеры допустимых значений:

- N = 30, S = 1000, M = 10
- N = 10, S = 5000, M = 15

## 3. Субъективная оценка сложности задачи


- **Субъективная оценка сложности**: 8 из 10. Задача требует понимания динамического программирования, генерации и проверки комбинаций, а также обработки большого объема данных.
- **Затраченное время**: примерно 4-6 часов включая понимание задачи, реализацию, тестирование и оптимизацию.

## Заключение

Решение задачи реализовано с использованием динамического программирования и генерации комбинаций. 
Основные аспекты включают оптимизацию покупок облигаций для максимизации дохода с учетом ограничений. 
Алгоритм подходит для небольших и средних значений параметров N, M и S. 
В случае больших значений необходимо рассматривать дополнительные оптимизации или иные подходы для сокращения вычислительной сложности.

- Полагаю, что одним из вариантов оптимизации будет использование жадного алгоритма для выбора генерации оптимальных комбинаций, так как основная сложность алгоритма связана именно c экспоненциальной зависимостью от количества лотов. 
- Также возможно добавить предобработку входных данных, заранее исключив нерентабельные лоты.
- Возможно использование многопоточности для генерации комбинаций и их проверке
- Использование математических методов и методов оптимального управления для построения мат.модели, с дальнейшим нахождением Гамильтониана и поиска приближённого решения